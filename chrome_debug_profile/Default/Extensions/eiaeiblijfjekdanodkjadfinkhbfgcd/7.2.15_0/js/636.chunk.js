"use strict";(self.webpackChunknordpass=self.webpackChunknordpass||[]).push([[636],{24636:(e,t,i)=>{i.d(t,{LinkedAccountSetup:()=>L});var n=i(74848),c=i(96540),s=i(47767),o=i(1876),r=i(58065),a=i(91120),l=i(55910),d=i(58997);const u=({icon:e,title:t,description:i,variant:c,isWide:s=!1,children:o,onGoBack:r})=>(0,n.jsx)(d.M,{onGoBack:r,children:(0,n.jsx)("div",{className:"flex size-full",children:(0,n.jsxs)("div",{className:(0,l.cx)("m-auto flex flex-col items-center py-6",s?"max-w-[432px]":"max-w-[336px]"),children:[(0,n.jsx)(a.ppr,{title:t,description:i,icon:e,variant:c,className:"w-full"}),o]})})}),m=({email:e,onGoBack:t})=>{const i=(0,s.Zp)();return(0,n.jsxs)(u,{icon:(0,n.jsx)(a.Yw$,{}),variant:"neutral",title:(0,n.jsx)(r.A,{id:"linkedAccountSetupAlreadyHasPremiumErrorTitle"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupAlreadyHasPremiumErrorDescription"}),onGoBack:t,children:[(0,n.jsx)(a.vu3,{size:"medium",message:e,classNames:"mt-6"}),(0,n.jsx)(a.$nd,{className:"mt-4 w-full",onClick:()=>i(o.bw.SETTINGS),children:(0,n.jsx)(r.A,{id:"linkedAccountSetupAlreadyHasPremiumErrorButton"})})]})},x=({children:e})=>(0,n.jsx)("div",{className:"my-6 w-full divide-y divide-[--sys-color-divider-subtle]",children:e}),p=({Icon:e,header:t,description:i,testId:c})=>(0,n.jsxs)("div",{className:"flex items-center py-4",children:[(0,n.jsx)(a.IoN,{className:"flex-none",variant:"neutral-transparent",size:"sm",icon:(0,n.jsx)(e,{})}),(0,n.jsxs)("div",{className:"ml-4","data-testid":c,children:[(0,n.jsx)("div",{className:"text-[--sys-color-on-bg-primary]",children:t}),(0,n.jsx)("div",{className:"text-[--sys-color-on-bg-secondary]",children:i})]})]});var S=i(6442),A=i(20990),j=i(72311),k=i(78522),h=i(92067),v=i(90867),f=i(53351),b=i(18543);const E=({className:e,onSubmit:t})=>{const[i,s]=(0,c.useState)(""),[o,d]=(0,c.useState)(!1),[u,m]=(0,c.useState)(""),{redirectToAccountCreation:x}=(0,b.D)(),{formatMessage:p}=(0,S.A)(),{action:E,isLoading:N,errorMessage:y,setErrorMessage:g}=(0,k.y)(v.FH.linkedAccount.initialize,{onSuccess:()=>{t(i)}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("form",{className:(0,l.cx)("w-full",e),onSubmit:e=>{let t=!1;e.preventDefault(),(0,h.xf)(i)||(g(p({id:"linkedAccountSetupEmailFormValidationError"})),t=!0),o||(m(p({id:"linkedAccountSetupEmailFormTermsOfServiceError"})),t=!0),t||E(i).catch(A.f)},children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)(a.Sc0,{"data-testid":"terms-of-service",label:(0,n.jsx)("span",{className:"text-sm text-[--sys-color-on-bg-secondary]",children:(0,n.jsx)(r.A,{id:"linkedAccountSetupEmailFormTermsOfServiceCheckbox",values:{link:e=>(0,n.jsx)(a.N_E,{underline:!0,onClick:e=>{e.preventDefault(),(0,f.k)(j.U.LinkedAccountTermsOfService).catch(A.f)},children:e})}})}),error:!!u,checked:o,onChange:e=>{m(""),d(e.target.checked)}}),(0,n.jsx)(a.Q0g,{error:u,className:"mx-3 mt-2"})]}),(0,n.jsx)(a.pde,{"data-testid":"personal-email-address",label:p({id:"linkedAccountSetupEmailFormInputPlaceholder"}),error:y,value:i,onChange:e=>{g(""),s(e)}}),(0,n.jsx)(a.$nd,{isLoading:N,type:"submit","data-testid":"submit-button",className:"mt-2 w-full",children:(0,n.jsx)(r.A,{id:"continue"})})]}),(0,n.jsx)("div",{className:"mt-6 text-center text-[--sys-color-on-bg-secondary]",children:(0,n.jsx)(r.A,{id:"linkedAccountSetupEmailFormNoPersonalAccountMessage",values:{link:e=>(0,n.jsx)(a.N_E,{underline:!0,onClick:x,children:e})}})})]})},N=({onSubmit:e,onGoBack:t})=>(0,n.jsxs)(u,{isWide:!0,icon:(0,n.jsx)(a.okO,{}),variant:"brand-lime",title:(0,n.jsx)(r.A,{id:"linkedAccountSetupSetEmailStepTitle"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupSetEmailStepDescription"}),onGoBack:t,children:[(0,n.jsxs)(x,{children:[(0,n.jsx)(p,{testId:"password-health-section",Icon:a.Nhe,header:(0,n.jsx)(r.A,{id:"linkedAccountSetupSetEmailStepPasswordHealthItemHeader"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupSetEmailStepPasswordHealthItemDescription"})}),(0,n.jsx)(p,{testId:"unlimited-account-section",Icon:a.Lnb,header:(0,n.jsx)(r.A,{id:"linkedAccountSetupSetEmailStepUnlimitedDevicesItemHeader"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupSetEmailStepUnlimitedDevicesItemDescription"})}),(0,n.jsx)(p,{Icon:a.X4E,testId:"data-breach-scanner-section",header:(0,n.jsx)(r.A,{id:"linkedAccountSetupSetEmailStepBreachScannerItemHeader"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupSetEmailStepBreachScannerItemDescription"})})]}),(0,n.jsx)(E,{onSubmit:e})]}),y=({onSubmit:e,onGoBack:t})=>(0,n.jsx)(u,{icon:(0,n.jsx)(a.XHs,{}),variant:"neutral",title:(0,n.jsx)(r.A,{id:"linkedAccountSetupIsB2bErrorTitle"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupIsB2bErrorDescription"}),onGoBack:t,children:(0,n.jsx)(E,{className:"mt-6",onSubmit:e})}),g=({onGoBack:e})=>{const{redirectToAccountCreation:t}=(0,b.D)();return(0,n.jsxs)(u,{isWide:!0,icon:(0,n.jsx)(a.XHs,{}),variant:"neutral",title:(0,n.jsx)(r.A,{id:"linkedAccountSetupNoAccountErrorTitle"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupNoAccountErrorDescription"}),onGoBack:e,children:[(0,n.jsxs)(x,{children:[(0,n.jsx)(p,{Icon:a.Yw$,header:(0,n.jsx)(r.A,{id:"linkedAccountSetupNoAccountErrorCreateAccountStepTitle"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupNoAccountErrorCreateAccountStepDescription"})}),(0,n.jsx)(p,{Icon:a.bED,header:(0,n.jsx)(r.A,{id:"linkedAccountSetupNoAccountErrorSwitchToWorkAccountStepTitle"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupNoAccountErrorSwitchToWorkAccountStepDescription"})}),(0,n.jsx)(p,{Icon:a.DEb,header:(0,n.jsx)(r.A,{id:"linkedAccountSetupNoAccountErrorGetPremiumStepTitle"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupNoAccountErrorGetPremiumStepDescription"})})]}),(0,n.jsx)(a.$nd,{className:"mt-2 w-full",onClick:t,children:(0,n.jsx)(r.A,{id:"linkedAccountSetupNoAccountErrorButton"})})]})};var B=i(24291),I=i(89889),w=i(34354);const C=({onGoBack:e})=>{const t=(0,B.d4)(I.WY),{logoutCurrentUser:i}=(0,b.D)(),c=(0,s.Zp)();return(0,n.jsx)(u,{icon:(0,n.jsx)(a.okO,{}),variant:"brand-lime",title:(0,n.jsx)(r.A,{id:"linkedAccountSetupSuccessStepTitle"}),description:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.A,{id:"linkedAccountSetupSuccessStepSubtitle1",values:{organizationTitle:t,link:e=>(0,n.jsx)(a.N_E,{underline:!0,onClick:()=>c({pathname:o.bw.SETTINGS,search:"?scrollToLinkedAccountSettings=true"}),children:e})}}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)(r.A,{id:"linkedAccountSetupSuccessStepSubtitle2"})]}),onGoBack:e,children:(0,n.jsx)(a.$nd,{className:"mt-6 w-full","data-testid":"open-switch-account-button",onClick:()=>{return t=function*(){w.fw?yield i():c(o.bw.MP_SWITCH_ACCOUNT)},new((e=void 0)||(e=Promise))(function(i,n){function c(e){try{o(t.next(e))}catch(e){n(e)}}function s(e){try{o(t.throw(e))}catch(e){n(e)}}function o(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e(function(e){e(n)})).then(c,s)}o((t=t.apply(undefined,[])).next())});var e,t},children:(0,n.jsx)(r.A,{id:"linkedAccountSetupSuccessStepButton"})})})};var T,G,D=i(35763),H=i(45847);!function(e){e.LinkEmail="link_email",e.VerifyEmail="verify_email",e.Success="success"}(T||(T={})),function(e){e[e.IsB2b=19007]="IsB2b",e[e.NoAccount=19009]="NoAccount",e[e.HasPremium=19010]="HasPremium"}(G||(G={}));const P=({email:e,onSubmit:t,setAccountLinkingError:i,onGoBack:s})=>{const{formatMessage:o}=(0,S.A)(),[l,d]=(0,c.useState)(""),[m,x]=(0,c.useState)(),{action:p,isLoading:j}=(0,k.y)(v.FH.linkedAccount.create,{onSuccess:t,onError:e=>{var t;const n=null===(t=e.info)||void 0===t?void 0:t.code;n&&Object.values(G).includes(n)?i(n):x(e.message)}}),{action:h}=(0,k.y)(()=>v.FH.linkedAccount.initialize(e),{onSuccess:()=>{(0,D.P0)(D.Et.ActionFeedback,{bodyText:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.BK0,{size:16,className:"mr-3 inline text-ref-color-green-40"}),(0,n.jsx)(r.A,{id:"linkedAccountSetupVerificationCodeStepResendMessage"})]})})},onError:e=>{var t;2009!==(null===(t=e.info)||void 0===t?void 0:t.code)?(0,H.$)(e):(0,H.$)((0,n.jsx)(r.A,{id:"linkedAccountSetupVerificationCodeStepInitializeRequestsLimitReached"}))}});return(0,n.jsxs)(u,{icon:(0,n.jsx)(a.aZ_,{}),variant:"neutral",title:(0,n.jsx)(r.A,{id:"linkedAccountSetupVerificationCodeStepTitle"}),description:(0,n.jsx)(r.A,{id:"linkedAccountSetupVerificationCodeStepDescription",values:{email:e}}),onGoBack:s,children:[(0,n.jsxs)("form",{className:"mt-6 w-full",onSubmit:e=>{e.preventDefault(),p(l).catch(A.f)},children:[(0,n.jsx)(a.pde,{"data-testid":"verification-code",label:o({id:"linkedAccountSetupVerificationCodeStepInputPlaceholder"}),error:m,value:l,onChange:e=>{x(""),d(e)}}),(0,n.jsx)(a.$nd,{isLoading:j,"data-testid":"submit-button",type:"submit",className:"mt-2 w-full",children:(0,n.jsx)(r.A,{id:"continue"})})]}),(0,n.jsx)("div",{className:"mt-6 text-sm text-[--sys-color-on-bg-secondary]",children:(0,n.jsx)(r.A,{id:"linkedAccountSetupVerificationCodeStepResendLink",values:{link:e=>(0,n.jsx)(a.N_E,{underline:!0,"data-testid":"resend-verification-code",onClick:h,children:e})}})})]})},L=()=>{const e=(0,s.Zp)(),[t,i]=(0,c.useState)(""),[r,a]=(0,c.useState)(),[l,d]=(0,c.useState)(T.LinkEmail),u=()=>e(o.bw.SETTINGS),x=()=>{a(void 0),d(T.LinkEmail)},p=e=>{i(e),a(void 0),d(T.VerifyEmail)};return r===G.HasPremium?(0,n.jsx)(m,{email:t,onGoBack:x}):r===G.NoAccount?(0,n.jsx)(g,{onGoBack:x}):r===G.IsB2b?(0,n.jsx)(y,{onSubmit:p,onGoBack:x}):l===T.Success?(0,n.jsx)(C,{onGoBack:u}):l===T.VerifyEmail?(0,n.jsx)(P,{email:t,setAccountLinkingError:a,onSubmit:()=>d(T.Success),onGoBack:x}):(0,n.jsx)(N,{onSubmit:p,onGoBack:u})}}}]);
//# sourceMappingURL=636.chunk.js.map