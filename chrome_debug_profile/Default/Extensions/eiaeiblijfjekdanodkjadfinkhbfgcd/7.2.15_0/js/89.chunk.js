"use strict";(self.webpackChunknordpass=self.webpackChunknordpass||[]).push([[89],{21672:(e,a,t)=>{t.d(a,{i:()=>l});var s=t(69883),i=t(60251),n=t(13823);const l=e=>{const a=(0,s.B$)(n.M.getState());a&&(e>=3?n.M.dispatch((0,i.R3)(a)):n.M.dispatch((0,i.P9)(a)))}},31838:(e,a,t)=>{t.d(a,{h:()=>x});var s,i,n,l,r,d=t(96540);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var s in t)({}).hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},c.apply(null,arguments)}const o=(e,a)=>d.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 40 40",ref:a},e),s||(s=d.createElement("path",{fill:"#fff",d:"M0 0h40v40H0z"})),i||(i=d.createElement("path",{fill:"#96B8EE",d:"M0 0h40v40H0z"})),n||(n=d.createElement("path",{fill:"#B0CDFB",d:"M0 40h40v-9.474L20 15.79 0 30.526z"})),l||(l=d.createElement("path",{fill:"#96B8EE",d:"M0 1.25h40v9.474L23.707 22.729a6.25 6.25 0 0 1-7.414 0L0 10.724z"})),r||(r=d.createElement("path",{fill:"#C1D9FF",d:"M0 0h40v9.474L23.707 21.479a6.25 6.25 0 0 1-7.414 0L0 9.474z"}))),m=(0,d.forwardRef)(o),x=(0,d.memo)(m)},41089:(e,a,t)=>{t.d(a,{EmailMaskDetailsView:()=>G});var s,i=t(74848),n=t(96540),l=t(32017),r=t.n(l),d=t(58065),c=t(47767),o=t(61962),m=t(73267),x=t(91912),h=t(22246),f=t(93586),u=t(35763),g=t(45847),j=t(20990),w=t(1876),k=t(90895),M=t(28696),v=t(78522),p=t(24291),b=t(69883),A=t(60251),E=t(86981),y=t(91055),F=t(54820);function C(){return C=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var s in t)({}).hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},C.apply(null,arguments)}const N=(e,a)=>n.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 12 12",ref:a},e),s||(s=n.createElement("path",{fill:"#95979C",d:"M.733 1c.4 0 .67.276.67.676 0 .238-.02.482-.02.827 0 2.104.74 2.962 2.825 2.962h4.064l1.496.087-1.866-1.697L6.506 2.44a.67.67 0 0 1-.2-.482c0-.382.281-.657.676-.657.169 0 .338.068.488.212l4.127 4.12c.15.145.225.326.225.514a.7.7 0 0 1-.225.514l-4.114 4.114c-.163.156-.332.225-.501.225-.395 0-.676-.282-.676-.658a.68.68 0 0 1 .2-.488l1.396-1.409 1.86-1.697-1.49.088H4.12C1.221 6.836 0 5.496 0 2.546c0-.363.013-.688.063-.932C.119 1.307.307 1 .733 1"}))),O=(0,n.forwardRef)(N),T=(0,n.memo)(O);var I=t(91120),L=t(90867),S=t(65125),z=t(54262),D=t(31838),H=t(37953),_=t(21672);const B=({isForwardingOn:e,email:a,uuid:t,emailMasksCount:s,headerIcon:n,handleForwarding:l})=>{const r=(0,p.wA)(),o=(0,c.Zp)(),{action:m,isLoading:x}=(0,v.y)(()=>L.FH.emailMasking.deleteEmailMask(t),{onSuccess:()=>{r((0,A.Yi)(t)),(0,_.i)(s-1),L.FH.action.save(k.ay.EmailMaskingMaskDeleted),o(w.bw.EMAIL_MASKING,{replace:!0}),(0,u.P0)(u.Et.ActionFeedback,{bodyText:(0,i.jsx)(d.A,{id:"emailMaskDeleted"})})},onError:()=>{(0,g.$)((0,i.jsx)(d.A,{id:"somethingWentWrongTryAgain"}))}});return(0,i.jsxs)("div",{className:"flex h-33 w-full items-center justify-center",children:[(0,i.jsxs)("div",{className:"flex min-w-0 flex-col overflow-hidden",children:[n||(0,i.jsx)(D.h,{className:"self-center rounded-[--ref-border-radius-lg]",width:64,height:64}),(0,i.jsx)("p",{className:"mt-4 truncate text-xl text-grey-darkest dark:text-white","data-testid":"email-mask-value",children:a})]}),(0,i.jsx)(H.x,{isDestructiveConfirmation:!0,button:e=>(0,i.jsx)(I.$nd,Object.assign({rank:"secondary",className:"absolute right-0 top-0 m-6","data-testid":"delete-email-mask_button",disabled:x},e,{children:(0,i.jsx)(d.A,{id:"emailMaskDelete"})})),header:(0,i.jsx)(d.A,{id:"deleteEmailMaskModalTitle"}),content:e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.A,{id:"deleteEmailMaskModalContent"}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(d.A,{id:"disableEmailForwardingInsteadOfDelete"})]}):(0,i.jsx)(d.A,{id:"deleteEmailMaskModalContentForwardingOff"}),action:()=>{return a=function*(){const e=(0,S.c)(m);!1!==e&&(yield e)},new((e=void 0)||(e=Promise))(function(t,s){function i(e){try{l(a.next(e))}catch(e){s(e)}}function n(e){try{l(a.throw(e))}catch(e){s(e)}}function l(a){var s;a.done?t(a.value):(s=a.value,s instanceof e?s:new e(function(e){e(s)})).then(i,n)}l((a=a.apply(undefined,[])).next())});var e,a},actionText:(0,i.jsx)(d.A,{id:"emailMaskDelete"}),cancelText:e?(0,i.jsx)(d.A,{id:"disableEmailForwarding"}):(0,i.jsx)(d.A,{id:"cancel"}),onCancel:l})]})};var P=t(58997);const G=()=>{const e=(0,c.Zp)(),a=(0,c.g)(),t=(0,p.d4)(E.YM,r()),s=(0,p.d4)(b.JQ),l=(0,p.d4)(A.A1),C=l.find(e=>e.uuid===a.maskId),[N,O]=(0,n.useState)(!1),[D,H]=(0,n.useState)((null==C?void 0:C.active)||!1),_={type:M.Rx.Alpha,direction:M.sH.Asc},G=(0,F.L)(t,_).filter(e=>(0,y._2)(e)===(null==C?void 0:C.email_mask.toLowerCase())),{action:W}=(0,v.y)(L.FH.emailMasking.changeEmailMaskStatus,{onSuccess:()=>{D?(L.FH.action.save(k.ay.EmailMaskingMaskForwardingOff),(0,u.P0)(u.Et.ActionFeedback,{bodyText:(0,i.jsx)(d.A,{id:"emailMaskingTurnedOff"})})):(L.FH.action.save(k.ay.EmailMaskingMaskForwardingOn),(0,u.P0)(u.Et.ActionFeedback,{bodyText:(0,i.jsx)(d.A,{id:"emailMaskingTurnedOn"})})),H(!D)},onError:()=>{(0,g.$)((0,i.jsx)(d.A,{id:"somethingWentWrongTryAgain"}))}}),$=()=>{(0,S.c)(()=>{C&&W(C.uuid,!D).catch(j.f)})};return(0,n.useEffect)(()=>{C||e(w.bw.EMAIL_MASKING,{replace:!0})},[C,e]),C?(0,i.jsx)(P.M,{headerContent:(0,i.jsx)(B,{email:C.email_mask,uuid:C.uuid,isForwardingOn:D,emailMasksCount:l.length,headerIcon:G.length>0&&(0,i.jsx)(o.x,{item:G[0],className:"self-center",size:"xxl"}),handleForwarding:D?$:j.f}),onGoBack:()=>e(w.bw.EMAIL_MASKING),children:(0,i.jsxs)("div",{className:"mx-auto w-full max-w-[1000px]",children:[(0,i.jsx)(x.w,{children:(0,i.jsxs)(f.O,{title:(0,i.jsxs)("div",{className:"flex flex-col text-base","data-testid":"email-mask-forward-section",children:[(0,i.jsxs)("span",{children:[(0,i.jsx)(d.A,{id:"emailMaskForwardTo"}),":"]}),(0,i.jsxs)("span",{className:"text-grey-dark inline-flex items-center text-sm dark:text-[--dmd-1]",children:[(0,i.jsx)(T,{height:12,width:12}),(0,i.jsx)("span",{className:"ml-1","data-testid":"email-mask-forward-value",children:s})]})]}),children:[(0,i.jsx)(I.lMk,{isChecked:D,"data-testid":`email-mask-forward-toggle-${D}`,onChange:()=>{(0,S.c)(()=>{D?O(!0):$()})}}),N&&(0,i.jsx)(z.a,{header:(0,i.jsx)(d.A,{id:"emailMaskingTurnOffForwardingTitle"}),content:(0,i.jsx)(d.A,{id:"emailMaskingTurnOffForwardingSubtitle"}),action:$,actionText:(0,i.jsx)(d.A,{id:"confirm"}),onClose:()=>O(!1)})]})}),(0,i.jsx)(x.w,{isVisible:G.length>0,titleClassName:"!mb-4 mt-6",title:(0,i.jsxs)("div",{className:"flex w-full items-center",children:[(0,i.jsx)("p",{className:"mr-1 text-base font-bold",children:(0,i.jsx)(d.A,{id:"emailMaskingUsedItems"})}),(0,i.jsx)(I.m_M,{title:(0,i.jsx)(d.A,{id:"emailMaskingMatchesItems"}),placement:"top",children:(0,i.jsx)(I.UGz,{size:24,className:"text-grey cursor-pointer dark:text-[--dmd-1]"})})]}),children:G.map(a=>(0,i.jsx)(h.g,{title:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(o.x,{item:a,className:"self-center",size:"xs"}),(0,i.jsx)("p",{className:"mx-4 truncate text-base",children:a.title})]}),onClick:()=>e(w.bw.VIEW_ITEM(a.uuid)),children:(0,i.jsx)(m.c,{})},a.uuid))})]})}):null}}}]);
//# sourceMappingURL=89.chunk.js.map